<extend name="Layout:ly2" />

<block name="head">
    <script>
        $(document).ready(function () {
            var option = {
                title : {
                    text: '产品类别比例  （开始时间：<?= date("Y-m-d",$date_start )?> - 结束时间：<?= date("Y-m-d",$date_end ) ?>）',
                    subtext: '按上传公历时间',
                    x:'center'
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient: 'vertical',
                    left: 'left',
                    /*data: ['直接访问','邮件营销']*/
                    data:[<?=$legend_data ?>]
                },
                series : [
                    {
                        name: '访问来源',
                        type: 'pie',
                        radius : '55%',
                        center: ['50%', '60%'],
                        /*data:[
                            {value:335, name:'直接访问'},
                            {value:310, name:'邮件营销'}
                        ],*/
                        data:[<?=$series_data ?>],
                        itemStyle: {
                            emphasis: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }
                ]
            };
            var chart = echarts.init(document.getElementById('chart'));
            chart.setOption(option);
            window.onresize = function(){
                chart.resize();
            };
        });
    </script>
</block>

<block name="body">
    <include file="Includes/dateSelect" />
    <div class="col-lg-12">
        <div id="chart"  class="charts_h600"></div>
    </div>
</block>